# 相关概念

**实时操作系统**：实时操作系统与一般的操作系统相比，最大的特色就是“实时性”，如果一个任务需要执行，实时操作系统会马上（在较短时间内）执行该任务，不会有较长的延时。这种特性保证了各个任务的及时执行。（单片机等嵌入式系统）

硬件抽象层：Hardware Abstraction Layer, HAL）是一种软件层，它位于操作系统**内核**或运行时环境与**硬件设备驱动之间**，目的是隐藏具体的硬件细节，为上层软件提供一致的接口，使得上层软件不必关心底层硬件的实现细节，从而提高代码的可移植性和复用性。

**大端小端模式**：

![](https://img-blog.csdnimg.cn/20210531171448139.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTYzMzA2MQ==,size_16,color_FFFFFF,t_70)

![](https://img-blog.csdnimg.cn/20210531172612980.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTYzMzA2MQ==,size_16,color_FFFFFF,t_70)

- **小端模式**:数据的**低位**放在**低地址**空间，数据**高位**放在**高地址**空间（简记：小端就是低位对应低地址，高位对应高地址）
- **大端模式**：数据的**高位**放在**低地址**空间，数据的**低位**放在**高地**址空间

#### 注意：读取数据从低位开始读，无论大端小端

**协处理器**:这是一种协助中央处理器完成其无法执行或执行效率、效果低下的处理工作而开发和应用的处理器。

# 习题

#### 1.ARM Cortex-3的通用寄存器有哪些？各有什么作用？

ARM Cortex-3拥有16个32位寄存器，名称R0-R15，分为

- **低寄存器**：R0-R7,可以被指定的所有指令访问，复位初始值不可知
- **高寄存器**：R8-R12，能被指定的所有32位指令访问，复位初始值不可知
- **堆栈指针SP**：R13，作为SP自动与字对齐。对应两个不会被同时访问的物理寄存器SP_main和SP_process;
- **链接寄存器LR**：R14，执行分支指令时存储一个返回地址；
- **程序计数器PC**：R15，指向当前的程序地址

#### 2.ARM微处理器运行模式有哪几种，请列举并说明

ARM微处理器的运行模式有7种，分别为：

- **用户模式**：正常程序执行时，ARM处理器所处的状态
- **快速中断模式**：用于快速传输和通道处理
- **外部中断模式**：用于通常的中断处理
- **特权模式**：供操作系统使用的一种保护模式
- **数据访问中止模式**：当数据或指令预取终止时进入该模式，用于虚拟村拿出及存储保护
- **未定义指令中止模式**：用于支持硬件协处理器软件仿真
- **系统模式**：用于运行特权级的操作系统任务

#### 1.辨析STM32中的异常和中断概念

在STM32中，正常程序执行流程发生暂时停止的清醒，统称为异常；而外部事件导致的程序执行流程改变的清醒被称为中断。因此，异常的概念包含了中断，或者说，中断是一种特殊的异常。

#### 2.说明ARM Cortex-M3处理器的存储器系统特点及映射分区

ARM Cortex-M3的存储器映射是预定义的，它的存储器系统支持位带操作，实现了在特殊的存储区域对单一比特的原子操作。

映射分区有：

- 代码区
- 片上SRAM区
- 片上外社区
- 片外RAM区和片外外社区
- 私有外设区
- 芯片商指定区

#### 3.ARM Cortex-M3处理器的中断响应过程分为那几个步骤

- 入栈
- 去向量
- 更新寄存器

#### 4.ARM Cortex-M3为什么能够高效且低延迟的对异常进行处理？

- 自动的状态保存和恢复
- 优先级屏蔽支持临界区
- 自动读取代码存储区或SRAM中包含ISR地址的向量表入口
- 支持末尾锁链，在末尾锁链中，处理器在两个ISR之间没有对寄存器进行出战和压栈操作的情况下背对背处理中断
- ISR Cortex-M3与NVIC之间采用紧耦合接口，通过该接口可以尽早地对中断和高优先级地迟来中断进行处理
- 中断的优先级可动态重新设置
- 中断数目可设置为1-240
- 中断优先级可配置为1-8位
- 处理模式与线程模式具有独立的堆栈和特权等级
- 使用C/C++标准调用规范：ARM架构的过程调用标准执行ISR控制传输

#### 5.什么是GPIO？

GPIO是一个灵活的由软件控制的数字信号，每个GPIO都表示一个链接到CPU特定引脚的一个位。

#### 6.STM32的GPIO端口可以配置成哪几种模式？

- 输入浮空
- 输入上拉
- 输入下拉
- 模拟输入
- 开漏输出
- 推挽输出
- 推挽式复用功能
- 开漏复用功能　

### 第三章 嵌入式开发环境

#### 1.什么是交叉编译？

在某个主机平台上（如PC）用交叉编译出可以在其他平台上（如ARM）运行的代码的过程。

#### 2.什么是交叉编译？为什么采用交叉编译？

所谓交叉编译，是指在一个平台上编译生成另一个平添上运行的可执行程序

之所以采用交叉编译，是因为目标平台上不具备直接运行开发环境的条件

### 第四章 STM32-A平台开发基础（理论）

#### 1.USTART、NVIC等常见名词分别是指什么？

- USTART是一种通用串行数据总线，用于异步通信，该总线双向通信，可以实现全双工传输和接收
- NVIC是内嵌向量中断控制器，提供中断控制器，用于总体管理异常

#### 2.什么是看门狗，看门狗的作用是什么？

- 为了检测和解决有软件错误一起的故障，嵌入式处理器通常具有一种看门狗模块
- 这种模块一般是倒计数器，其作用是以一定的周期产生复位信号使系统复位，产生复位信号的时刻一般是倒计数到某个值的时刻
- 在设计嵌入式系统软件时，通过在看门狗产生复位信号前执行喂狗操作（即让看门狗的倒计数器数值重新从某个设定的倒计数值开始）来避免看门狗倒计数器产生复位信号

### 第五章 μC/OS-Ⅱ及应用开发

#### 1.嵌入式操作系统的概念、特点及应用

#### 什么是嵌入式操作系统？嵌入式操作系统的基本特点是什么？为什么需要嵌入式操作系统？

- 一种支持嵌入式系统应用的操作系统软件，是嵌入式系统中极为重要的组成部分。通常包括与硬件相关的底层驱动软件、系统内核、设备驱动接口、通信协议、图形界面等，嵌入式操作系统负责嵌入式系统的全部软、硬件资源的分配、任务调度，控制、协调并发活动
- 具有通用操作系统的基本特点：能够有效管理越来越复杂的系统资源，能够把硬件虚拟化，简化的驱动程序移植和维护，能够提供库函数、驱动程序、工具集以及应用程序
- 嵌入式处理器性能提高，资源增多
- 任务要求复杂，实时、多任务，编程困难
- 许多的任务需求是相同的，完全可以将一些相同的功能作为一个通用模块实现，这就是操作系统，它屏蔽了底层硬件的细节，方便用户，提供标准的，可裁剪的系统服务软组件

#### 2.请介绍一下μC/OS-Ⅱ操作系统，并简述一下μC/OS-Ⅱ操作系统的特点，并列出μC/OS-Ⅱ的内核和内核结构

1. μC/OS-Ⅱ是一个**实时操作系统内核**，它包含**任务调度、任务管理、时间管理、内存管理和任务间的通信与同步**等基本功能，而没有输出输出管理，文件系统，网络之类的服务
2. μC/OS-Ⅱ的特点：
   - 公开源代码
   - 可移植性
   - 可固化
   - 可裁剪
   - 占先式
   - 多任务
   - 可确定性
   - 任务栈
   - 系统服务
   - 中断管理
   - 稳定性和可靠性
3. μC/OS-Ⅱ内核
   - 任务管理
   - 时间管理
   - 任务之间的通信与同步
   - 内存管理
   - μC/OS的中断处理
   - μC/OS-Ⅱ的初始化
   - μC/OS-Ⅱ的启动
4. μC/OS-Ⅱ的内核结构
   - 临界段
   - 任务
   - 任务状态
   - 任务控制块
   - 任务调度
   - 空闲任务